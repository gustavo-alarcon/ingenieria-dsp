<div>
    <div class="ms-dialog-header">
        <mat-icon class="ms-dialog-header__icon">add_task</mat-icon>
        <h3 class="ms-dialog-header__title">Acc. Correctivas</h3>
        <span class="ms-fill"></span>
        <button mat-icon-button mat-dialog-close>
            <mat-icon>cancel</mat-icon>
        </button>
    </div>
    <mat-divider></mat-divider>

    <mat-dialog-content>
        <mat-progress-bar *ngIf="loading$ | async" mode="indeterminate"></mat-progress-bar>
        <div class="details" style="margin-top: 10px;">
            <p><span style="font-weight: bold;"> OT Actual :</span> {{data.workOrder ? data.workOrder : ''}}</p>
            <p><span style="font-weight: bold;"> Componente :</span> {{data.component ? data.component : ''}}</p>
            <p><span style="font-weight: bold;"> Número de paqueteo :</span> {{data.packageNumber ? data.packageNumber : ''}}</p>
            <p><span style="font-weight: bold;"> Horómetro de componente :</span> {{data.componentHourMeter ? data.componentHourMeter : ''}}</p>
            <p><span style="font-weight: bold;"> Número de parte :</span> {{data.partNumber ? data.partNumber : ''}}</p>
            <p><span style="font-weight: bold;"> Tipo de evento :</span> {{data.eventType ? data.eventType : ''}} </p>
            <p><span style="font-weight: bold;"> Operacion minera :</span> {{data.miningOperation ? data.miningOperation : ''}} </p>
            <p><span style="font-weight: bold;"> Tipo de evento :</span> {{(data.createdAt['seconds'] * 1000) | date : 'dd/MM/yy - hh:mm:ss'}}</p>
        </div>

        <mat-divider>   </mat-divider>

        <form class="container-form" [formGroup]="listBahiasForm" autocomplete="off">               
            <div formArrayName="bahias" class="bahias">
                <div *ngFor="let _ of bahias.controls; let i=index" class="container-form__form-array">
                    <div [formGroupName]="i" class="container-form-array">
                        <mat-form-field appearance="outline"   class="container-form__form-array--input1">
                            <mat-label>Accion correctiva {{i}}</mat-label>
                            <input matInput placeholder="Escribe..." formControlName="workShop">
                            <mat-error *ngIf="bahias.controls[i].get('workShop').errors">
                                Campo <strong>requerido.</strong>
                            </mat-error>
                        </mat-form-field>        

                        <mat-form-field appearance="outline" class="container-form__form-array--input2">
                            <mat-label>Area responsable</mat-label>
                            <input matInput type='text' placeholder="Escribe..." formControlName="name">
                            <mat-error *ngIf="bahias.controls[i].get('name').errors">
                                Campo <strong>requerido.</strong>
                            </mat-error>
                        </mat-form-field>

                        <button mat-icon-button type="button" style="margin-top: 8px;" class="btn-delete">
                            <mat-icon color="warn" (click)="deleteControl(i)">delete</mat-icon>
                        </button>
                    </div>
                </div>
            </div>
            <button type="button" mat-stroked-button color="primary" class="container-form__btn-add" (click)="addControl()">
                <mat-icon color="primary">add</mat-icon>
                AGREGAR
            </button>  
            <br>

            <h3>Informe</h3>
            <div class="container-form__uploadXlx">
                <p *ngIf="fileSelect" style="color:#0064EA;">{{nameFileSelect}} </p>
                <div >
                    <input #fileInput2 style="display: none" type="file" 
                           id="fileInput2"
                           (change)="uploadFiles($event)" accept="*"
                           >
                           <br>
                    <button type="file" aria-label="add" mat-button class="container-form__uploadXlx--btn-add"
                            accept="*" 
                        (click)="fileInput2.click()">
                        <mat-icon aria-label="agregar" class="icon-add">add</mat-icon>
                        ADJUNTAR 
                    </button>                            
                </div>                                              
            </div>     
          
        </form>  
        
        
    </mat-dialog-content>
    <mat-dialog-actions align="end">
        <button mat-stroked-button color="warn" mat-dialog-close [disabled]="loading$ | async">CANCELAR</button>
        <button mat-stroked-button color="primary" (click)="save()" [disabled]="loading$ | async">GUARDAR</button>
        <button mat-stroked-button color="primary" (click)="save()" [disabled]="loading$ | async">ENVIAR</button>
    </mat-dialog-actions>
</div>